<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Mount Baker Halloween Survey ðŸŽƒ</title>
<style>
body{
  font-family:"Poppins",sans-serif;
  background:#0b0011 url('https://images.unsplash.com/photo-1604079628040-bb61cd9dbe4f?auto=format&fit=crop&w=1920&q=80') center/cover fixed;
  color:#f5e6ff;text-align:center;margin:0;padding:0;overflow-x:hidden;
}
form{
  background:rgba(0,0,0,.85);margin:2em auto;padding:2em;border-radius:15px;
  width:90%;max-width:500px;box-shadow:0 0 30px #b35cff;
}
h1{color:#c77dff;text-shadow:2px 2px 10px #b35cff;}
label{display:block;margin-top:1em;font-weight:bold;color:#e0b3ff;}
select,textarea,input,button{
  width:100%;margin-top:.5em;padding:.6em;border-radius:8px;border:none;font-size:1em;
}
select,textarea,input{background:#1a001f;color:#fff;}
button{
  background:#b35cff;color:#fff;font-weight:bold;cursor:pointer;
}
button:hover{background:#d580ff;}

#reaction{
  position:fixed;bottom:10%;right:5%;width:200px;height:200px;border-radius:10px;
  overflow:hidden;box-shadow:0 0 20px rgba(0,0,0,0.7);
  opacity:0;transition:opacity .4s ease;z-index:100;
}
#reaction.show{opacity:1;}
#reaction img{width:100%;height:100%;object-fit:cover;border-radius:10px;}
#fadeOverlay{
  position:fixed;inset:0;background:black;opacity:0;pointer-events:none;z-index:99;
  transition:opacity .7s ease;
}
@keyframes shake{
  0%,100%{transform:translate(0,0);}
  20%{transform:translate(-10px,0);}
  40%{transform:translate(10px,0);}
  60%{transform:translate(-6px,0);}
  80%{transform:translate(6px,0);}
}
.shake{animation:shake .4s;}
</style>
</head>
<body>
<h1>ðŸ’œ Mount Baker Secondary Halloween Survey 2025 ðŸ‘»</h1>

<form id="surveyForm">
  <label>Your Name (optional)</label>
  <input type="text" name="name" placeholder="Enter your name if youâ€™d like">

  <label>Costume Contest rating</label>
  <select name="costumeContest" required>
    <option value="">Select</option>
    <option data-positive>Awesome</option>
    <option data-positive>Good</option>
    <option>Okay</option>
    <option data-negative>Needs Improvement</option>
  </select>

  <label>Night in the Museum rating</label>
  <select name="nightInMuseum" required>
    <option value="">Select</option>
    <option data-positive>Spooktacular!</option>
    <option data-positive>Fun</option>
    <option>Okay</option>
    <option data-negative>Needs more exhibits</option>
  </select>

  <label>Kahoot rating</label>
  <select name="kahoot" required>
    <option value="">Select</option>
    <option data-positive>Awesome</option>
    <option data-positive>Fun</option>
    <option>Okay</option>
    <option data-negative>Could be better</option>
  </select>

  <label>Scavenger Hunt rating</label>
  <select name="scavengerHunt" required>
    <option value="">Select</option>
    <option data-positive>Exciting</option>
    <option data-positive>Good</option>
    <option>Okay</option>
    <option data-negative>Needs improvement</option>
  </select>

  <label>Movie rating</label>
  <select name="movie" required>
    <option value="">Select</option>
    <option data-positive>Perfect choice!</option>
    <option data-positive>Good</option>
    <option>Okay</option>
    <option data-negative>Needs better movie</option>
  </select>

  <label>Meme Bingo rating</label>
  <select name="memeBingo" required>
    <option value="">Select</option>
    <option data-positive>Hilarious!</option>
    <option data-positive>Fun</option>
    <option>Okay</option>
    <option data-negative>Needs better memes</option>
  </select>

  <label>Any comments or spooky stories?</label>
  <textarea name="comments" rows="3" placeholder="Type here..."></textarea>

  <button type="submit">Submit ðŸ’œ</button>
  <p id="successMsg" style="display:none;color:#80ffea;font-weight:bold;">Thanks for your feedback! ðŸ‘»</p>
</form>

<!-- Mr Incredible popup -->
<div id="reaction"><img src="" alt="reaction"></div>
<div id="fadeOverlay"></div>

<audio id="boom" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_545b78406a.mp3?filename=explosion-110095.mp3"></audio>

<script>
const SCRIPT_URL = "YOUR_WEB_APP_URL_HERE";
const form = document.getElementById('surveyForm');
const success = document.getElementById('successMsg');
const reaction = document.getElementById('reaction');
const img = reaction.querySelector('img');
const fade = document.getElementById('fadeOverlay');
const boom = document.getElementById('boom');

// Reliable hosted images
const happy = "https://cdn.pixabay.com/photo/2023/01/22/21/44/mr-incredible-7738817_1280.png";
const uncanny = "https://cdn.pixabay.com/photo/2023/02/03/15/13/mr-incredible-uncanny-7767980_1280.png";

// Reaction animation
function showReaction(type) {
  img.src = type === "positive" ? happy : uncanny;
  reaction.classList.add("show");
  if (type === "negative") {
    fade.style.opacity = 0.8;
    document.body.classList.add("shake");
    boom.currentTime = 0;
    boom.play().catch(()=>{});
    setTimeout(() => fade.style.opacity = 0, 700);
    setTimeout(() => document.body.classList.remove("shake"), 400);
  }
  setTimeout(() => reaction.classList.remove("show"), 2000);
}

form.querySelectorAll('select').forEach(sel => {
  sel.addEventListener('change', () => {
    const opt = sel.selectedOptions[0];
    if (opt.dataset.positive) showReaction("positive");
    else if (opt.dataset.negative) showReaction("negative");
  });
});

if (localStorage.getItem('mbss_submitted')) {
  form.innerHTML = "<h2>ðŸ’œ You already submitted. Thanks!</h2>";
}

form.addEventListener('submit', e => {
  e.preventDefault();
  const data = Object.fromEntries(new FormData(form).entries());
  fetch(SCRIPT_URL, {
    method: 'POST',
    mode: 'no-cors',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(data)
  })
  .then(() => {
    success.style.display = 'block';
    localStorage.setItem('mbss_submitted', 'true');
    form.reset();
    setTimeout(() => {
      form.innerHTML = "<h2>ðŸ’œ You already submitted. Thanks!</h2>";
    }, 1500);
  })
  .catch(() => alert('Error submitting form'));
});
</script>
</body>
</html>
